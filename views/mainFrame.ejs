<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>bookCalander admin</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=account_circle,logout,menu" />
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.1.0/fonts/remixicon.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>
<body>
    <div class="sidebar-container">
        <aside class="sidebar">
            <div class="sidebar-content">
                <h3>bookCalander</h3>
                <ul>
                    <li><a href="#">회원 관리</a></li>
                    <li><a href="#">게시물 관리</a></li>
                    <li><a href="#">댓글 관리</a></li>
                    <li class="has-submenu">
                        <a href="#" class="toggle-submenu">통계 확인<i class="ri-arrow-down-s-line"></i></a>
                        <ul class="submenu">
                            <li><a href="#">등록 도서량</a></li>
                            <li><a href="#">등록 독후감</a></li>
                            <li><a href="#">등록 게시물</a></li>
                            <li><a href="#">등록 댓글</a></li>
                            <li><a href="#">사용자 수</a></li>
                        </ul>
                    </li>
                    <li class="has-submenu">
                        <a href="#" class="toggle-submenu">AI 관리<i class="ri-arrow-down-s-line"></i></a>
                        <ul class="submenu">
                            <li><a href="#">키워드 추출 모델 I/O</a></li>
                            <li><a href="#">감정 추출 AI 모델 ac</a></li>
                            <li><a href="#">AI 사서 챗봇 모델 ac</a></li>
                            <li><a href="#">질문 생성 모델 L/U</a></li>
                            <li><a href="#">GPT API KEY</a></li>
                        </ul>
                    </li>
                    <li class="has-submenu">
                        <a href="#" class="toggle-submenu">신고 내역 관리<i class="ri-arrow-down-s-line"></i></a>
                        <ul class="submenu">
                            <li><a href="#">게시물 신고 관리</a></li>
                            <li><a href="#">댓글 신고 관리</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="sidebar-footer">
                <span class="material-symbols-outlined">account_circle</span>
                <h3><%=who%></h3>
                <% if(login===true){ %>
                <a href="/logout"><span class="material-symbols-outlined">logout</span></a>
                <% } %>
            </div>
        </aside>
        <div class="content">
            <div class="sidebar-icon">
                <span class="material-symbols-outlined">menu</span>
            </div>
            <%- include(body) %>
        </div>
    </div>
    <script>
    const sidebarIcon = document.querySelector('.sidebar-icon');
    const sidebar = document.querySelector('.sidebar');
    const submenuToggles = document.querySelectorAll('.toggle-submenu'); // 모든 토글 버튼 선택

    sidebarIcon.addEventListener('click', () => {
        sidebar.classList.toggle('open');
    });

    submenuToggles.forEach(toggle => { // 모든 토글 버튼에 대해 반복
        toggle.addEventListener('click', (e) => {
            e.preventDefault(); // 링크 이동 막기
            const submenu = toggle.nextElementSibling; // 클릭된 토글 버튼의 다음 형제 요소 (submenu)
            const arrowIcon = toggle.querySelector('.arrow'); // 토글 버튼 내부의 화살표 아이콘

            if (submenu && submenu.classList.contains('submenu')) {
                submenu.classList.toggle('open');
            }

            if (arrowIcon) {
                arrowIcon.classList.toggle('expanded');
                if (arrowIcon.textContent === 'expand_more') {
                    arrowIcon.textContent = 'expand_less';
                } else {
                    arrowIcon.textContent = 'expand_more';
                }
            }
        });
    });
    </script>
</body>
</html>